<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>PennyWise - Expense Tracker</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM (UMD) -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; -webkit-tap-highlight-color: transparent; }
        /* Custom scrollbar for better aesthetics */
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #d1d5db; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #9ca3af; }
        
        /* Mobile Safe Area */
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
        .pt-safe { padding-top: env(safe-area-inset-top); }
    </style>
</head>
<body class="bg-gray-50 text-gray-900">
    <div id="root"></div>

    <script type="text/babel">
        // --- React Globals ---
        const { useState, useEffect, useMemo, useRef } = React;

        // --- Icons System ---
        const Icons = {
            PieChart: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/></svg>,
            Plus: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14"/><path d="M12 5v14"/></svg>,
            Trash2: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>,
            TrendingUp: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>,
            TrendingDown: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="23 18 13.5 8.5 8.5 13.5 1 6"/><polyline points="17 18 23 18 23 12"/></svg>,
            DollarSign: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="12" x2="12" y1="2" y2="22"/><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/></svg>,
            Settings: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.47a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.35a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/><circle cx="12" cy="12" r="3"/></svg>,
            Calendar: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>,
            LayoutDashboard: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="7" height="9" x="3" y="3" rx="1"/><rect width="7" height="5" x="14" y="3" rx="1"/><rect width="7" height="9" x="14" y="12" rx="1"/><rect width="7" height="5" x="3" y="16" rx="1"/></svg>,
            List: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="8" x2="21" y1="6" y2="6"/><line x1="8" x2="21" y1="12" y2="12"/><line x1="8" x2="21" y1="18" y2="18"/><line x1="3" x2="3.01" y1="6" y2="6"/><line x1="3" x2="3.01" y1="12" y2="12"/><line x1="3" x2="3.01" y1="18" y2="18"/></svg>,
            Wallet: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"/><path d="M3 5v14a2 2 0 0 0 2 2h16v-5"/><path d="M18 12a2 2 0 0 0 0 4h4v-4Z"/></svg>,
            ChevronLeft: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m15 18-6-6 6-6"/></svg>,
            ChevronRight: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m9 18 6-6-6-6"/></svg>,
            AlertCircle: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><line x1="12" x2="12" y1="8" y2="12"/><line x1="12" x2="12.01" y1="16" y2="16"/></svg>,
            Download: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>,
            Search: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>,
            Edit2: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"/></svg>,
            ArrowUpCircle: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="m16 12-4-4-4 4"/><path d="M12 16V8"/></svg>,
            ArrowDownCircle: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><path d="m16 12-4 4-4-4"/><path d="M12 8v8"/></svg>,
            Save: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>,
            X: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 6 6 18"/><path d="m6 6 18 18"/></svg>,
            Repeat: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m17 2 4 4-4 4"/><path d="M3 11v-1a4 4 0 0 1 4-4h14"/><path d="m7 22-4-4 4-4"/><path d="M21 13v1a4 4 0 0 1-4 4H3"/></svg>,
            AlertTriangle: (p) => <svg {...p} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>
        };

        // --- Helpers ---
        // Fix for date parsing off-by-one error (force YYYY-MM-DD to be local)
        const formatDisplayDate = (dateStr) => {
            if (!dateStr) return '';
            const [y, m, d] = dateStr.split('-');
            const date = new Date(y, parseInt(m) - 1, parseInt(d));
            return date.toLocaleDateString('en-US', { day: '2-digit', month: 'short' });
        };

        // --- Components ---

        const Card = ({ children, className = "" }) => (
          <div className={`bg-white rounded-xl shadow-sm border border-gray-100 p-4 md:p-6 ${className}`}>
            {children}
          </div>
        );

        const Button = ({ children, onClick, variant = 'primary', className = "", type = "button", disabled = false, ariaLabel="" }) => {
          const baseStyle = "px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center gap-2 active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed select-none";
          const variants = {
            primary: "bg-emerald-600 text-white hover:bg-emerald-700 shadow-md shadow-emerald-200",
            secondary: "bg-white text-gray-700 border border-gray-200 hover:bg-gray-50",
            danger: "bg-red-50 text-red-600 hover:bg-red-100 border border-red-100",
            ghost: "text-gray-500 hover:text-emerald-600 hover:bg-emerald-50",
            outline: "border-2 border-emerald-600 text-emerald-600 hover:bg-emerald-50"
          };
          return (
            <button 
                type={type} 
                onClick={onClick} 
                disabled={disabled} 
                aria-label={ariaLabel}
                className={`${baseStyle} ${variants[variant]} ${className}`}
            >
              {children}
            </button>
          );
        };

        const Input = ({ label, ...props }) => (
          <div className="flex flex-col gap-1.5 w-full">
            {label && <label className="text-xs font-semibold text-gray-500 uppercase tracking-wider">{label}</label>}
            <input 
              className="w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 outline-none transition-all text-base"
              {...props} 
            />
          </div>
        );

        const Select = ({ label, options, ...props }) => (
          <div className="flex flex-col gap-1.5 w-full">
            {label && <label className="text-xs font-semibold text-gray-500 uppercase tracking-wider">{label}</label>}
            <select 
              className="w-full px-4 py-2.5 rounded-lg border border-gray-200 focus:border-emerald-500 focus:ring-2 focus:ring-emerald-100 outline-none transition-all bg-white text-base"
              {...props}
            >
              {options.map(opt => (
                <option key={opt.value} value={opt.value}>{opt.label}</option>
              ))}
            </select>
          </div>
        );

        const ProgressBar = ({ current, total, colorClass = "bg-emerald-500" }) => {
          const percentage = Math.min((current / (total || 1)) * 100, 100);
          return (
            <div className="h-2.5 w-full bg-gray-100 rounded-full overflow-hidden">
              <div 
                className={`h-full ${colorClass} transition-all duration-500 ease-out`} 
                style={{ width: `${percentage}%` }}
              />
            </div>
          );
        };

        // --- Constants ---

        const DEFAULT_EXPENSE_CATEGORIES = [
          "Housing", "Food", "Transport", "Utilities", "Insurance", 
          "Healthcare", "Savings", "Personal", "Entertainment", "Miscellaneous"
        ];

        const DEFAULT_INCOME_CATEGORIES = [
          "Salary", "Freelance", "Investments", "Gifts", "Other"
        ];

        const CURRENCIES = [
          { label: "USD ($)", value: "USD" },
          { label: "EUR (€)", value: "EUR" },
          { label: "GBP (£)", value: "GBP" },
          { label: "JPY (¥)", value: "JPY" },
          { label: "INR (₹)", value: "INR" },
          { label: "LKR (Rs)", value: "LKR" }
        ];

        // --- Sub-Components (Defined outside App to prevent re-renders losing focus) ---

        const TrendChart = ({ transactions, formatCurrency }) => {
          const last6Months = useMemo(() => Array.from({ length: 6 }, (_, i) => {
            const d = new Date();
            d.setMonth(d.getMonth() - (5 - i));
            return {
              key: `${d.getFullYear()}-${String(d.getMonth() + 1).padStart(2, '0')}`,
              label: d.toLocaleString('default', { month: 'short' })
            };
          }), []);

          const data = useMemo(() => last6Months.map(m => {
            const monthTrans = transactions.filter(t => t.date.startsWith(m.key));
            return {
              ...m,
              income: monthTrans.filter(t => t.type === 'income').reduce((sum, t) => sum + parseFloat(t.amount), 0),
              expense: monthTrans.filter(t => t.type === 'expense').reduce((sum, t) => sum + parseFloat(t.amount), 0),
            };
          }), [transactions, last6Months]);

          const maxVal = Math.max(...data.map(d => Math.max(d.income, d.expense)), 100);

          return (
            <div className="h-48 w-full flex items-end justify-between gap-2 mt-4 pt-6 pb-2 px-2 relative select-none">
              <div className="absolute inset-0 flex flex-col justify-between pointer-events-none opacity-10">
                <div className="border-t border-gray-900 w-full h-0"></div>
                <div className="border-t border-gray-900 w-full h-0"></div>
                <div className="border-t border-gray-900 w-full h-0"></div>
                <div className="border-t border-gray-900 w-full h-0"></div>
              </div>

              {data.map((d, i) => (
                <div key={i} className="flex-1 flex flex-col justify-end items-center h-full group relative">
                  <div className="absolute bottom-full mb-2 hidden group-hover:block bg-gray-800 text-white text-xs p-2 rounded z-10 w-max pointer-events-none shadow-xl">
                    <div className="font-bold">{d.label}</div>
                    <div className="text-emerald-300">In: {formatCurrency(d.income)}</div>
                    <div className="text-rose-300">Out: {formatCurrency(d.expense)}</div>
                  </div>
                  
                  <div className="w-full flex justify-center items-end gap-1 h-full px-1">
                     <div 
                      className="w-1/2 bg-emerald-300/80 hover:bg-emerald-400 rounded-t-sm transition-all"
                      style={{ height: `${(d.income / maxVal) * 100}%`, minHeight: '4px' }}
                    />
                    <div 
                      className="w-1/2 bg-rose-400/80 hover:bg-rose-500 rounded-t-sm transition-all"
                      style={{ height: `${(d.expense / maxVal) * 100}%`, minHeight: '4px' }}
                    />
                  </div>
                  <span className="text-[10px] text-gray-500 mt-2 font-medium">{d.label}</span>
                </div>
              ))}
            </div>
          );
        };

        const DashboardView = ({ stats, formatCurrency, categories, budgets, editingId, setEditingId, formData, setFormData, handleSaveTransaction, transactions }) => (
          <div className="space-y-6 animate-in fade-in duration-500">
            {/* Snap Scrolling for Mobile Summary Cards */}
            <div className="flex md:grid md:grid-cols-3 gap-4 overflow-x-auto pb-4 md:pb-0 snap-x snap-mandatory -mx-4 px-4 md:mx-0 md:px-0 scrollbar-hide">
              <div className="min-w-[85vw] md:min-w-0 snap-center">
                <Card className="bg-gradient-to-br from-emerald-600 to-emerald-800 text-white border-none relative overflow-hidden h-full">
                    <div className="absolute right-0 top-0 p-4 opacity-10">
                    <Icons.Wallet size={100} />
                    </div>
                    <div className="relative z-10">
                    <div className="flex items-center gap-3 mb-2 opacity-80">
                        <Icons.Wallet size={20} />
                        <span className="text-sm font-medium">Current Balance</span>
                    </div>
                    <div className="text-3xl font-bold tracking-tight">{formatCurrency(stats.balance)}</div>
                    <div className="text-sm mt-2 flex items-center gap-2 opacity-70">
                        <Icons.ArrowUpCircle size={14} className="text-emerald-200" /> {formatCurrency(stats.income)}
                        <span className="mx-1">|</span>
                        <Icons.ArrowDownCircle size={14} className="text-rose-200" /> {formatCurrency(stats.expense)}
                    </div>
                    </div>
                </Card>
              </div>

              <div className="min-w-[85vw] md:min-w-0 snap-center">
                <Card className="h-full">
                    <div className="flex items-center gap-3 mb-2 text-gray-500">
                    <Icons.TrendingDown size={20} className="text-rose-500" />
                    <span className="text-sm font-medium">Monthly Expenses</span>
                    </div>
                    <div className="text-3xl font-bold text-gray-900">{formatCurrency(stats.expense)}</div>
                    <div className="text-sm mt-2 text-gray-400">
                    Budget: {formatCurrency(stats.totalBudget)}
                    </div>
                    <div className="mt-3">
                    <ProgressBar current={stats.expense} total={stats.totalBudget} colorClass={stats.expense > stats.totalBudget ? "bg-rose-500" : "bg-emerald-500"} />
                    </div>
                </Card>
              </div>

              <div className="min-w-[85vw] md:min-w-0 snap-center">
                <Card className="h-full">
                    <div className="flex items-center gap-3 mb-2 text-gray-500">
                    <Icons.TrendingUp size={20} className="text-emerald-500" />
                    <span className="text-sm font-medium">Savings (Income - Exp)</span>
                    </div>
                    <div className={`text-3xl font-bold ${stats.income - stats.expense >= 0 ? 'text-emerald-600' : 'text-rose-600'}`}>
                    {formatCurrency(stats.income - stats.expense)}
                    </div>
                    <div className="text-sm mt-2 text-gray-400">
                    {stats.income > 0 ? (( (stats.income - stats.expense) / stats.income) * 100).toFixed(1) : 0}% savings rate
                    </div>
                </Card>
              </div>
            </div>

            <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
              <div className="lg:col-span-2 space-y-6">
                <Card className={`border-l-4 ${editingId ? 'border-l-amber-500' : 'border-l-emerald-500'}`}>
                  <div className="flex justify-between items-center mb-6">
                    <h3 className="text-lg font-bold text-gray-800 flex items-center gap-2">
                      {editingId ? <Icons.Edit2 size={20} className="text-amber-500"/> : <Icons.Plus size={20} className="text-emerald-600"/>}
                      {editingId ? 'Edit Transaction' : 'Quick Add'}
                    </h3>
                    {editingId && (
                      <button onClick={() => { setEditingId(null); setFormData(prev => ({...prev, amount: ''})); }} className="text-xs text-gray-500 hover:text-red-500 flex items-center gap-1">
                        <Icons.X size={14}/> Cancel Edit
                      </button>
                    )}
                  </div>

                  <form onSubmit={handleSaveTransaction} className="space-y-4">
                    <div className="flex gap-4 p-1 bg-gray-100 rounded-lg w-fit">
                      <button
                        type="button"
                        onClick={() => setFormData({...formData, type: 'expense'})}
                        className={`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${formData.type === 'expense' ? 'bg-white text-rose-600 shadow-sm' : 'text-gray-500'}`}
                      >
                        Expense
                      </button>
                      <button
                        type="button"
                        onClick={() => setFormData({...formData, type: 'income'})}
                        className={`px-4 py-1.5 rounded-md text-sm font-medium transition-all ${formData.type === 'income' ? 'bg-white text-emerald-600 shadow-sm' : 'text-gray-500'}`}
                      >
                        Income
                      </button>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                      <Input 
                        label="Description" 
                        placeholder={formData.type === 'expense' ? "e.g. Grocery Run" : "e.g. Salary"} 
                        value={formData.description}
                        onChange={e => setFormData({...formData, description: e.target.value})}
                        required
                      />
                      <Input 
                        label="Amount" 
                        type="number" 
                        inputMode="decimal"
                        step="0.01" 
                        placeholder="0.00"
                        value={formData.amount}
                        onChange={e => setFormData({...formData, amount: e.target.value})}
                        required
                      />
                    </div>
                    
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                      <Select 
                        label="Category"
                        options={(formData.type === 'expense' ? categories.expense : categories.income).map(c => ({ label: c, value: c }))}
                        value={formData.category}
                        onChange={e => setFormData({...formData, category: e.target.value})}
                      />
                      <Input 
                        label="Date" 
                        type="date" 
                        value={formData.date}
                        onChange={e => setFormData({...formData, date: e.target.value})}
                        required
                      />
                    </div>

                    <div className="pt-2">
                      <Button type="submit" variant="primary" className={`w-full ${editingId ? 'bg-amber-600 hover:bg-amber-700 shadow-amber-200' : ''}`}>
                        {editingId ? <><Icons.Save size={18}/> Update Transaction</> : <><Icons.Plus size={18}/> Add {formData.type === 'expense' ? 'Expense' : 'Income'}</>}
                      </Button>
                    </div>
                  </form>
                </Card>

                <Card>
                  <h3 className="text-lg font-bold text-gray-800 flex items-center gap-2">
                    <Icons.TrendingUp size={20} className="text-emerald-600" />
                    6-Month Trend
                  </h3>
                  <TrendChart transactions={transactions} formatCurrency={formatCurrency} />
                </Card>
              </div>

              <div className="lg:col-span-1">
                <Card className="h-full">
                  <h3 className="text-lg font-bold text-gray-800 mb-6 flex items-center gap-2">
                    <Icons.PieChart size={20} className="text-emerald-600" />
                    Budget Status
                  </h3>
                  <div className="space-y-6 max-h-[600px] overflow-y-auto pr-2 custom-scrollbar">
                    {categories.expense.map(cat => {
                      const budget = budgets[cat] || 0;
                      const spent = stats.spendingByCategory[cat] || 0;
                      if (budget === 0 && spent === 0) return null;

                      const isOver = spent > budget;
                      
                      return (
                        <div key={cat} className="space-y-2">
                          <div className="flex justify-between text-sm">
                            <span className="font-medium text-gray-700">{cat}</span>
                            <span className="text-gray-500">
                              <span className={isOver ? "text-rose-600 font-bold" : ""}>{formatCurrency(spent)}</span>
                              <span className="mx-1 text-xs">/</span>
                              <span className="text-xs">{formatCurrency(budget)}</span>
                            </span>
                          </div>
                          <ProgressBar 
                            current={spent} 
                            total={budget} 
                            colorClass={isOver ? "bg-rose-500" : "bg-emerald-500"} 
                          />
                        </div>
                      );
                    })}
                    {Object.keys(stats.spendingByCategory).length === 0 && (
                      <div className="text-center py-10 text-gray-400 italic text-sm">
                        Start adding expenses to see budget breakdowns.
                      </div>
                    )}
                  </div>
                </Card>
              </div>
            </div>
          </div>
        );

        const ExpensesView = ({ filteredTransactions, currentMonthName, searchTerm, setSearchTerm, formatCurrency, handleDuplicate, handleEditClick, handleDelete }) => (
          <div className="space-y-6 animate-in slide-in-from-right-4 duration-300">
            <Card>
              <div className="flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4">
                <div>
                  <h3 className="text-lg font-bold text-gray-800">Transaction History</h3>
                  <div className="text-sm text-gray-500">
                    {filteredTransactions.length} records in {currentMonthName}
                  </div>
                </div>
                
                <div className="relative w-full md:w-64">
                  <Icons.Search className="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400" size={16} />
                  <input 
                    type="text"
                    placeholder="Search..."
                    value={searchTerm}
                    onChange={(e) => setSearchTerm(e.target.value)}
                    className="w-full pl-9 pr-4 py-2 rounded-lg border border-gray-200 text-sm focus:border-emerald-500 focus:outline-none"
                  />
                </div>
              </div>
              
              {filteredTransactions.length === 0 ? (
                <div className="text-center py-12 bg-gray-50 rounded-lg border border-dashed border-gray-200">
                  <Icons.List size={48} className="mx-auto text-gray-300 mb-3" />
                  <h4 className="text-gray-600 font-medium">No transactions found</h4>
                  <p className="text-gray-400 text-sm">Try changing filters or add a new transaction.</p>
                </div>
              ) : (
                <>
                  {/* Desktop Table View */}
                  <div className="hidden md:block overflow-x-auto">
                    <table className="w-full text-left border-collapse">
                      <thead>
                        <tr className="border-b border-gray-100 text-gray-500 text-xs uppercase tracking-wider">
                          <th className="pb-3 pl-2 font-semibold">Date</th>
                          <th className="pb-3 font-semibold">Description</th>
                          <th className="pb-3 font-semibold">Category</th>
                          <th className="pb-3 text-right font-semibold">Amount</th>
                          <th className="pb-3 pr-2 text-right font-semibold">Actions</th>
                        </tr>
                      </thead>
                      <tbody className="text-sm">
                        {filteredTransactions.map((t) => (
                          <tr key={t.id} className="group hover:bg-gray-50 transition-colors border-b border-gray-50 last:border-0">
                            <td className="py-4 pl-2 text-gray-500 font-mono text-xs md:text-sm">
                              {formatDisplayDate(t.date)}
                            </td>
                            <td className="py-4 font-medium text-gray-900">
                              <div className="flex items-center gap-2">
                                 {t.type === 'income' ? <Icons.ArrowUpCircle size={14} className="text-emerald-500"/> : <Icons.ArrowDownCircle size={14} className="text-rose-500"/>}
                                 {t.description}
                              </div>
                            </td>
                            <td className="py-4">
                              <span className="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800">
                                {t.category}
                              </span>
                            </td>
                            <td className={`py-4 text-right font-bold ${t.type === 'income' ? 'text-emerald-600' : 'text-gray-800'}`}>
                              {t.type === 'income' ? '+' : ''}{formatCurrency(t.amount)}
                            </td>
                            <td className="py-4 pr-2 text-right">
                              <div className="flex justify-end gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
                                <button onClick={() => handleDuplicate(t)} className="p-1.5 text-gray-400 hover:text-emerald-600 rounded-md" aria-label="Duplicate">
                                  <Icons.Repeat size={16} />
                                </button>
                                <button onClick={() => handleEditClick(t)} className="p-1.5 text-gray-400 hover:text-amber-500 rounded-md" aria-label="Edit">
                                  <Icons.Edit2 size={16} />
                                </button>
                                <button onClick={() => handleDelete(t.id)} className="p-1.5 text-gray-400 hover:text-rose-500 rounded-md" aria-label="Delete">
                                  <Icons.Trash2 size={16} />
                                </button>
                              </div>
                            </td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>

                  {/* Mobile Card View */}
                  <div className="md:hidden space-y-3">
                    {filteredTransactions.map((t) => (
                      <div key={t.id} className="p-4 bg-gray-50 rounded-lg border border-gray-100 active:bg-gray-100 transition-colors">
                        <div className="flex justify-between items-start mb-2">
                          <div className="flex items-center gap-2">
                            <span className="font-mono text-xs text-gray-500 bg-white px-1.5 py-0.5 rounded border border-gray-200">
                                {formatDisplayDate(t.date)}
                            </span>
                            <span className="text-xs font-medium px-2 py-0.5 bg-gray-200 rounded-full text-gray-600">
                                {t.category}
                            </span>
                          </div>
                          <span className={`font-bold ${t.type === 'income' ? 'text-emerald-600' : 'text-gray-900'}`}>
                             {t.type === 'income' ? '+' : ''}{formatCurrency(t.amount)}
                          </span>
                        </div>
                        <div className="font-medium text-gray-800 mb-3 flex items-center gap-2">
                            {t.type === 'income' ? <Icons.ArrowUpCircle size={16} className="text-emerald-500"/> : <Icons.ArrowDownCircle size={16} className="text-rose-500"/>}
                            {t.description}
                        </div>
                        <div className="flex justify-end gap-3 pt-2 border-t border-gray-200">
                           <button onClick={() => handleDuplicate(t)} className="text-xs font-medium text-gray-500 flex items-center gap-1 p-1">
                                <Icons.Repeat size={14} /> Duplicate
                           </button>
                           <button onClick={() => handleEditClick(t)} className="text-xs font-medium text-amber-600 flex items-center gap-1 p-1">
                                <Icons.Edit2 size={14} /> Edit
                           </button>
                           <button onClick={() => handleDelete(t.id)} className="text-xs font-medium text-rose-600 flex items-center gap-1 p-1">
                                <Icons.Trash2 size={14} /> Delete
                           </button>
                        </div>
                      </div>
                    ))}
                  </div>
                </>
              )}
            </Card>
          </div>
        );

        const SettingsView = ({ settings, setSettings, handleExportCSV, categories, addCategory, removeCategory, budgets, setBudgets, resetData }) => {
          const [newCat, setNewCat] = useState('');
          const [catType, setCatType] = useState('expense');

          return (
            <div className="space-y-6 animate-in slide-in-from-right-4 duration-300">
              <Card>
                <h3 className="text-lg font-bold text-gray-800 mb-6 flex items-center gap-2">
                  <Icons.Settings size={20} className="text-emerald-600" />
                  General Preferences
                </h3>
                
                <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                  <div className="space-y-4">
                    <label className="block text-sm font-medium text-gray-700">Currency</label>
                    <div className="flex flex-wrap gap-2">
                      {CURRENCIES.map(c => (
                        <button
                          key={c.value}
                          onClick={() => setSettings({...settings, currency: c.value})}
                          className={`px-3 py-2 rounded-lg text-sm border ${settings.currency === c.value ? 'bg-emerald-50 border-emerald-500 text-emerald-700 font-bold' : 'bg-white border-gray-200 hover:border-emerald-300'}`}
                        >
                          {c.label}
                        </button>
                      ))}
                    </div>
                  </div>

                  <div className="space-y-4">
                    <label className="block text-sm font-medium text-gray-700">Data Management</label>
                    <Button onClick={handleExportCSV} variant="secondary" className="w-full justify-start">
                      <Icons.Download size={18} /> Export Data (CSV)
                    </Button>
                    <div className="pt-2">
                        <Button onClick={resetData} variant="danger" className="w-full justify-start text-xs">
                            <Icons.AlertTriangle size={16} /> Reset All Data
                        </Button>
                    </div>
                  </div>
                </div>
              </Card>

              <Card>
                <h3 className="text-lg font-bold text-gray-800 mb-6 flex items-center gap-2">
                  <Icons.List size={20} className="text-emerald-600" />
                  Manage Categories
                </h3>

                <div className="flex gap-4 mb-6">
                  <button 
                    onClick={() => setCatType('expense')}
                    className={`pb-2 border-b-2 font-medium text-sm transition-colors ${catType === 'expense' ? 'border-rose-500 text-rose-600' : 'border-transparent text-gray-500'}`}
                  >
                    Expense
                  </button>
                  <button 
                    onClick={() => setCatType('income')}
                    className={`pb-2 border-b-2 font-medium text-sm transition-colors ${catType === 'income' ? 'border-emerald-500 text-emerald-600' : 'border-transparent text-gray-500'}`}
                  >
                    Income
                  </button>
                </div>

                <div className="flex gap-2 mb-4">
                  <input 
                    value={newCat}
                    onChange={e => setNewCat(e.target.value)}
                    placeholder="New Category Name..."
                    className="flex-1 px-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:border-emerald-500"
                  />
                  <Button onClick={() => { addCategory(catType, newCat); setNewCat(''); }}>
                    Add
                  </Button>
                </div>

                <div className="flex flex-wrap gap-2">
                  {categories[catType].map(cat => (
                    <div key={cat} className="group flex items-center gap-2 px-3 py-1.5 bg-gray-50 border border-gray-200 rounded-lg text-sm">
                      {cat}
                      <button onClick={() => removeCategory(catType, cat)} className="text-gray-400 hover:text-rose-500 opacity-0 group-hover:opacity-100 transition-opacity">
                        <Icons.X size={14} />
                      </button>
                    </div>
                  ))}
                </div>
              </Card>

              <Card>
                 <h3 className="text-lg font-bold text-gray-800 mb-4">Set Monthly Budgets</h3>
                 <p className="text-sm text-gray-500 mb-6">Set targets for your expense categories.</p>
                 <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  {categories.expense.map((category) => (
                    <div key={category} className="flex items-center gap-2">
                      <span className="text-sm text-gray-600 w-1/3 truncate" title={category}>{category}</span>
                      <input
                        type="number"
                        inputMode="decimal"
                        placeholder="0"
                        value={budgets[category] || ''}
                        onChange={(e) => setBudgets({...budgets, [category]: e.target.value})}
                        className="flex-1 px-3 py-1.5 text-sm border border-gray-200 rounded-md focus:outline-none focus:border-emerald-500 text-right"
                      />
                    </div>
                  ))}
                 </div>
              </Card>
            </div>
          );
        };

        // --- Sub-components for Layout ---

        const NavButton = ({ active, onClick, icon: Icon, label }) => (
          <button 
            onClick={onClick}
            className={`flex flex-col items-center gap-1 transition-colors ${active ? 'text-emerald-600' : 'text-gray-400 hover:text-gray-600'}`}
          >
            <Icon size={24} strokeWidth={active ? 2.5 : 2} />
            <span className="text-[10px] font-medium">{label}</span>
          </button>
        );

        const DesktopNavButton = ({ active, onClick, label }) => (
          <button
            onClick={onClick}
            className={`px-6 py-2 rounded-full text-sm font-medium transition-all ${
              active 
                ? 'bg-emerald-600 text-white shadow-md' 
                : 'text-gray-600 hover:bg-gray-100'
            }`}
          >
            {label}
          </button>
        );

        // --- Main App Component ---

        function App() {
          // --- State ---
          const [activeTab, setActiveTab] = useState('dashboard');
          
          // Data
          const [transactions, setTransactions] = useState(() => {
            const saved = localStorage.getItem('transactions');
            return saved ? JSON.parse(saved) : [];
          });
          
          const [categories, setCategories] = useState(() => {
            const saved = localStorage.getItem('categories');
            return saved ? JSON.parse(saved) : { expense: DEFAULT_EXPENSE_CATEGORIES, income: DEFAULT_INCOME_CATEGORIES };
          });

          const [budgets, setBudgets] = useState(() => {
            const saved = localStorage.getItem('budgets');
            return saved ? JSON.parse(saved) : {};
          });

          const [settings, setSettings] = useState(() => {
            const saved = localStorage.getItem('settings');
            return saved ? JSON.parse(saved) : { currency: 'USD' };
          });

          // UI State
          const [currentDate, setCurrentDate] = useState(new Date());
          const [editingId, setEditingId] = useState(null);
          const [searchTerm, setSearchTerm] = useState("");
          
          // Form State
          const [formData, setFormData] = useState({
            type: 'expense',
            amount: '',
            category: 'Food',
            description: '',
            date: new Date().toISOString().split('T')[0]
          });

          // --- Effects ---
          useEffect(() => localStorage.setItem('transactions', JSON.stringify(transactions)), [transactions]);
          useEffect(() => localStorage.setItem('categories', JSON.stringify(categories)), [categories]);
          useEffect(() => localStorage.setItem('budgets', JSON.stringify(budgets)), [budgets]);
          useEffect(() => localStorage.setItem('settings', JSON.stringify(settings)), [settings]);

          useEffect(() => {
            if (!editingId) {
              const defaultCat = formData.type === 'expense' ? categories.expense[0] : categories.income[0];
              setFormData(prev => ({ ...prev, category: defaultCat }));
            }
          }, [formData.type, categories, editingId]);

          // --- Helpers ---
          const formatCurrency = (amount) => {
            return new Intl.NumberFormat('en-US', {
              style: 'currency',
              currency: settings.currency,
              minimumFractionDigits: 0
            }).format(amount);
          };

          const currentMonthName = currentDate.toLocaleString('default', { month: 'long', year: 'numeric' });
          const currentMonthKey = `${currentDate.getFullYear()}-${String(currentDate.getMonth() + 1).padStart(2, '0')}`;

          // --- Derived Data ---
          const filteredTransactions = useMemo(() => {
            return transactions
              .filter(t => t.date.startsWith(currentMonthKey))
              .filter(t => 
                t.description.toLowerCase().includes(searchTerm.toLowerCase()) || 
                t.category.toLowerCase().includes(searchTerm.toLowerCase())
              )
              .sort((a, b) => new Date(b.date) - new Date(a.date));
          }, [transactions, currentMonthKey, searchTerm]);

          const stats = useMemo(() => {
            const income = filteredTransactions
              .filter(t => t.type === 'income')
              .reduce((sum, t) => sum + parseFloat(t.amount), 0);
              
            const expense = filteredTransactions
              .filter(t => t.type === 'expense')
              .reduce((sum, t) => sum + parseFloat(t.amount), 0);
            
            const totalBudget = Object.values(budgets).reduce((sum, item) => sum + parseFloat(item), 0);
            
            const spendingByCategory = filteredTransactions
              .filter(t => t.type === 'expense')
              .reduce((acc, t) => {
                acc[t.category] = (acc[t.category] || 0) + parseFloat(t.amount);
                return acc;
              }, {});

            return { income, expense, balance: income - expense, totalBudget, spendingByCategory };
          }, [filteredTransactions, budgets]);

          // --- Handlers ---
          const handleSaveTransaction = (e) => {
            e.preventDefault();
            if (!formData.amount || !formData.description) return;

            const payload = { 
              ...formData, 
              id: editingId || Date.now().toString(), 
              amount: parseFloat(formData.amount) 
            };

            if (editingId) {
              setTransactions(prev => prev.map(t => t.id === editingId ? payload : t));
              setEditingId(null);
            } else {
              setTransactions(prev => [payload, ...prev]);
            }

            setFormData({
              type: 'expense',
              amount: '',
              category: categories.expense[0],
              description: '',
              date: new Date().toISOString().split('T')[0]
            });
            
            if(activeTab === 'dashboard') setActiveTab('expenses');
          };

          const handleEditClick = (t) => {
            setEditingId(t.id);
            setFormData(t);
            setActiveTab('dashboard');
            window.scrollTo({ top: 0, behavior: 'smooth' });
          };

          const handleDuplicate = (t) => {
            const newTrans = { ...t, id: Date.now().toString(), date: new Date().toISOString().split('T')[0] };
            setTransactions(prev => [newTrans, ...prev]);
          };

          const handleDelete = (id) => {
            if(window.confirm('Delete this transaction?')) {
              setTransactions(prev => prev.filter(e => e.id !== id));
            }
          };

          const handleExportCSV = () => {
            const headers = ["ID", "Date", "Type", "Category", "Description", "Amount"];
            const rows = transactions.map(t => 
              [t.id, t.date, t.type, t.category, `"${t.description}"`, t.amount].join(",")
            );
            const csvContent = "data:text/csv;charset=utf-8," + [headers.join(","), ...rows].join("\n");
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", `expenses_export_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
          };

          const addCategory = (type, name) => {
            const trimmed = name.trim();
            if (trimmed && !categories[type].some(c => c.toLowerCase() === trimmed.toLowerCase())) {
              setCategories(prev => ({ ...prev, [type]: [...prev[type], trimmed] }));
            }
          };

          const removeCategory = (type, name) => {
            if (confirm(`Remove category "${name}"?`)) {
              setCategories(prev => ({ ...prev, [type]: prev[type].filter(c => c !== name) }));
            }
          };

          const resetData = () => {
            if(confirm("WARNING: This will delete ALL transactions and settings properly. Are you sure?")) {
                localStorage.clear();
                window.location.reload();
            }
          }

          // --- Layout ---

          return (
            <div className="min-h-screen bg-gray-50 font-sans text-gray-900 pb-24 md:pb-12 pt-safe">
              {/* Navbar */}
              <nav className="bg-white border-b border-gray-200 sticky top-0 z-20">
                <div className="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
                  <div className="flex items-center justify-between h-16">
                    <div className="flex items-center gap-2">
                      <div className="bg-emerald-600 p-1.5 rounded-lg shadow-sm shadow-emerald-200">
                        <Icons.DollarSign className="text-white" size={20} />
                      </div>
                      <span className="text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-800 to-teal-600 hidden xs:block">
                        PennyWise
                      </span>
                    </div>

                    {/* Month Selector */}
                    <div className="flex items-center bg-gray-100/80 backdrop-blur rounded-full p-1 border border-gray-200">
                      <button onClick={() => { const d = new Date(currentDate); d.setMonth(d.getMonth()-1); setCurrentDate(d); }} className="p-1.5 hover:bg-white hover:shadow-sm rounded-full text-gray-600 transition-all" aria-label="Previous Month">
                        <Icons.ChevronLeft size={16} />
                      </button>
                      <div className="flex items-center gap-2 px-3 md:px-4 min-w-[120px] md:min-w-[140px] justify-center text-sm font-semibold text-gray-700">
                        <Icons.Calendar size={14} className="text-emerald-600 mb-0.5" />
                        {currentMonthName}
                      </div>
                      <button onClick={() => { const d = new Date(currentDate); d.setMonth(d.getMonth()+1); setCurrentDate(d); }} className="p-1.5 hover:bg-white hover:shadow-sm rounded-full text-gray-600 transition-all" aria-label="Next Month">
                        <Icons.ChevronRight size={16} />
                      </button>
                    </div>
                  </div>
                </div>
              </nav>

              {/* Main Content */}
              <main className="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                {activeTab === 'dashboard' && (
                  <DashboardView 
                    stats={stats}
                    formatCurrency={formatCurrency}
                    categories={categories}
                    budgets={budgets}
                    editingId={editingId}
                    setEditingId={setEditingId}
                    formData={formData}
                    setFormData={setFormData}
                    handleSaveTransaction={handleSaveTransaction}
                    transactions={transactions}
                  />
                )}
                {activeTab === 'expenses' && (
                  <ExpensesView 
                    filteredTransactions={filteredTransactions}
                    currentMonthName={currentMonthName}
                    searchTerm={searchTerm}
                    setSearchTerm={setSearchTerm}
                    formatCurrency={formatCurrency}
                    handleDuplicate={handleDuplicate}
                    handleEditClick={handleEditClick}
                    handleDelete={handleDelete}
                  />
                )}
                {activeTab === 'settings' && (
                  <SettingsView 
                    settings={settings}
                    setSettings={setSettings}
                    handleExportCSV={handleExportCSV}
                    categories={categories}
                    addCategory={addCategory}
                    removeCategory={removeCategory}
                    budgets={budgets}
                    setBudgets={setBudgets}
                    resetData={resetData}
                  />
                )}
              </main>

              {/* Mobile Navigation */}
              <div className="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 px-6 py-3 md:hidden z-30 pb-safe">
                <div className="flex justify-around items-center">
                  <NavButton 
                    active={activeTab === 'dashboard'} 
                    onClick={() => setActiveTab('dashboard')} 
                    icon={Icons.LayoutDashboard} 
                    label="Overview" 
                  />
                  <NavButton 
                    active={activeTab === 'expenses'} 
                    onClick={() => setActiveTab('expenses')} 
                    icon={Icons.List} 
                    label="Transactions" 
                  />
                  <NavButton 
                    active={activeTab === 'settings'} 
                    onClick={() => setActiveTab('settings')} 
                    icon={Icons.Settings} 
                    label="Settings" 
                  />
                </div>
              </div>

              {/* Desktop Tabs */}
              <div className="hidden md:flex fixed bottom-8 left-1/2 -translate-x-1/2 bg-white/90 backdrop-blur-md border border-gray-200 rounded-full shadow-lg p-1.5 gap-2 z-20">
                <DesktopNavButton 
                  active={activeTab === 'dashboard'} 
                  onClick={() => setActiveTab('dashboard')} 
                  label="Dashboard" 
                />
                <DesktopNavButton 
                  active={activeTab === 'expenses'} 
                  onClick={() => setActiveTab('expenses')} 
                  label="Transactions" 
                />
                <DesktopNavButton 
                  active={activeTab === 'settings'} 
                  onClick={() => setActiveTab('settings')} 
                  label="Settings" 
                />
              </div>
            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>